using Raylib_cs;
using System;
using System.Collections.Generic;
using System.Data.Common;
using System.Linq;
using System.Numerics;
using System.Reflection.Emit;
using System.Runtime.CompilerServices;
using System.Security.Cryptography.X509Certificates;
using System.Text;
using System.Threading.Tasks;

namespace Snake
{
    sealed class Level
    {
        public int[,]? grid;
        public enum levelName {none, free, freeWall, story, mapEditor, vsPlayer, vsAI }
        public levelName currentLevel;
        public enum storyName { A,B,C,D,E}
        public storyName currentStory;
        public enum mapEditorStep {none, sizeSet, wallSet, ready}
        public mapEditorStep currentStep = mapEditorStep.none;
        int initColumn = 5;
        int initRow = 5;
        
        public void Menu()
        {
            currentLevel = levelName.none;
            grid = new int[,] {{ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 },
                               { 1, 1, 1, 1, 1, 1, 2, 0, 2, 1, 1, 1, 1, 1, 1 },
                               { 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1 },
                               { 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1 },
                               { 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1,},
                               { 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1 },
                               { 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1 },
                               { 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 1 },
                               { 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1 },
                               { 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1 },
                               { 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1,},
                               { 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1 },
                               { 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1 },
                               { 1, 1, 1, 1, 1, 1, 2, 0, 2, 1, 1, 1, 1, 1, 1 },
                               { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 }};
        }
        public void LevelFree()
        {
            grid = new int[,] {{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}};
        }
        public void LevelFreeWall()
        {
            grid = new int[,] {{ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1}};
        }
        public void LevelA()
        {
            currentStory = storyName.A;
            grid = new int[,] {{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                               { 0, 0, 1, 0, 0, 0, 0, 1, 0, 0 },
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                               { 0, 0, 1, 0, 0, 0, 0, 1, 0, 0 },
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }};
        }
        public void LevelB()
        {
            currentStory = storyName.B;
            grid = new int[,] {{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                               { 0, 1, 1, 0, 0, 0, 0, 1, 1, 0 },
                               { 0, 1, 1, 0, 0, 0, 0, 1, 1, 0 },
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                               { 0, 0, 0, 0, 1, 1, 0, 0, 0, 0 },
                               { 0, 0, 0, 0, 1, 1, 0, 0, 0, 0 },
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                               { 0, 1, 1, 0, 0, 0, 0, 1, 1, 0 },
                               { 0, 1, 1, 0, 0, 0, 0, 1, 1, 0 },
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }};
        }

        public void LevelC()
        {
            currentStory = storyName.C;
            grid = new int[,] {{ 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0 },
                               { 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0 },
                               { 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0 },
                               { 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0 },
                               { 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0 },
                               { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 },
                               { 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0 },
                               { 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0 },
                               { 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0 },
                               { 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0 },
                               { 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0 }};
        }

        public void LevelD()
        {
            currentStory = storyName.D;
            grid = new int[,] {{ 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1,0 },
                               { 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1,0 },
                               { 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1,0 },
                               { 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1,0 },
                               { 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1,0 },
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,0 },
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,0 },
                               { 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1,0 },
                               { 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1,0 },
                               { 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1,0 },
                               { 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1,0 },
                               { 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1,0 }};
        }
        public void LevelE()
        {
            currentStory = storyName.E;
            grid = new int[,] {{ 1, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
                               { 0, 0, 1, 1, 0, 0, 1, 1, 0, 0 },
                               { 0, 1, 0, 0, 0, 0, 0, 0, 1, 0 },
                               { 0, 1, 0, 1, 0, 0, 1, 0, 1, 0 },
                               { 0, 1, 0, 1, 0, 0, 1, 0, 1, 0 },
                               { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                               { 0, 1, 0, 1, 0, 0, 1, 0, 1, 0 },
                               { 0, 1, 0, 1, 0, 0, 1, 0, 1, 0 },
                               { 0, 1, 0, 0, 0, 0, 0, 0, 1, 0 },
                               { 0, 0, 1, 1, 1, 1, 1, 1, 0, 0 },
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 1 }};
        }

        public void LevelVersus()
        {
            grid = new int[,] {{ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                               { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1}};
        }

        public void MapEditor(List<GridCell> cells)
        {
            if (currentStep == mapEditorStep.sizeSet)
            {
                if ((Raylib.IsKeyPressed(KeyboardKey.Right)) && (initColumn < 30))
                {
                    initColumn++;
                }
                if ((Raylib.IsKeyPressed(KeyboardKey.Left)) && (initColumn > 5))
                {
                    initColumn--;
                }
                if ((Raylib.IsKeyPressed(KeyboardKey.Up)) && (initRow < 30))
                {
                    initRow++;
                }
                if ((Raylib.IsKeyPressed(KeyboardKey.Down)) && (initRow > 5))
                {
                    initRow--;
                }
                grid = new int[initRow, initColumn];
                if (Raylib.IsKeyPressed(KeyboardKey.Enter))
                {
                    currentStep = mapEditorStep.ready;
                }
            } 
        }
    }
}
